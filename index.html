// Local fallback responses (when API is not available)
        function generateLocalResponse(query) {
            const lowerQuery = query.toLowerCase();
            
            // Check for AI-related queries
            if (lowerQuery.includes('ai') || lowerQuery.includes('artificial') || lowerQuery.includes('machine learning') || lowerQuery.includes('ml')) {
                return "Absolutely! Ravi is currently building multiple AI products at Equiti Ventures including Snifty (AI Photo Storyteller with patent filed), TurboPassports (document automation with computer vision), Jourro (LLM-powered travel platform), Scan2Secure (AI security automation), and Receipts360 (AI expense management, patent pending). He's filed multiple patents in AI applications, works with LLMs like GPT-4 and Claude, and has hands-on expertise in computer vision, NLP, and deep learning. His entire current focus is on practical AI implementation.";
            } else if (lowerQuery.includes('location') || lowerQuery.includes('where') || lowerQuery.includes('based')) {
                return "Ravi is located in Fremont, California, in the San Francisco Bay Area - the heart of technology innovation.";
            } else if (lowerQuery.includes('experience') || lowerQuery.includes('work') || lowerQuery.includes('background')) {
                return "Ravi has over 20 years of technology leadership experience. Currently Founder of Equiti Ventures building 5 AI products (Snifty, TurboPassports, Jourro, Scan2Secure, Receipts360). Previously: Senior Director at Cisco ($250M+ ARR), Global Head of Data at Dropbox (led pre-IPO to IPO, $850M to $1.8B growth), Director at Chegg (40% revenue increase), and Senior Manager at Yahoo (managed $2B revenue platform for 600M+ users).";
            } else if (lowerQuery.includes('current') || lowerQuery.includes('now') || lowerQuery.includes('doing')) {
                return "Ravi is Founder of Equiti Ventures, actively developing 5 AI-powered applications: Snifty (AI photo storytelling, patent filed), TurboPassports (passport/visa automation using computer vision), Jourro (LLM travel intelligence), SniftyShare (collaborative AI tools), and Scan2Secure (AI security for SMBs). He's also a RippleWorks Expert Advisor helping social ventures globally.";
            } else if (lowerQuery.includes('skill') || lowerQuery.includes('expertise') || lowerQuery.includes('technical')) {
                return "Ravi's expertise: AI/ML (LLMs like GPT-4/Claude, Computer Vision, NLP, TensorFlow, PyTorch), Cloud (AWS certified, GCP, Azure), Data Platforms (Snowflake, Spark, Kafka, Hadoop), Programming (Python, Java, Scala, Swift, Kotlin), Databases (PostgreSQL, MongoDB, Redis), and frameworks like Langchain, React, Node.js. He specializes in building scalable AI solutions.";
            } else if (lowerQuery.includes('snifty') || lowerQuery.includes('turbo') || lowerQuery.includes('jourro') || lowerQuery.includes('receipts')) {
                return "Ravi's AI products: Snifty (AI Photo Storyteller with patent filed - uses on-device/cloud LLMs for photo memories), TurboPassports (OCR/computer vision for document automation), Jourro (LLM-powered travel platform), Receipts360 (AI expense management, patent pending), and Scan2Secure (AI security automation). Built with Swift, Kotlin, React, using GPT-4, Claude, and custom ML models.";
            } else if (lowerQuery.includes('cisco') || lowerQuery.includes('dropbox') || lowerQuery.includes('yahoo') || lowerQuery.includes('chegg')) {
                return "At Cisco (2020-2024): Senior Director, built cloud platform from MVP to $250M+ ARR. At Dropbox (2017-2020): Global Head of Data, led pre-IPO to IPO, doubled revenue to $1.8B. At Chegg (2015-2017): Director Data Engineering, 40% revenue increase. At Yahoo (2007-2015): Senior Manager, managed platforms serving 600M+ users generating $2B revenue.";
            } else if (lowerQuery.includes('education') || lowerQuery.includes('degree') || lowerQuery.includes('study')) {
                return "Ravi holds an MBA in Finance from Amity University and a Bachelor of Computer Applications from Madras University, India. He also has Oracle Certified Professional and Teradata certifications, plus recent AWS, Google Cloud AI, and advanced ML certifications.";
            } else if (lowerQuery.includes('patent') || lowerQuery.includes('innovation')) {
                return "Ravi has filed multiple patents including Snifty (AI Photo Storyteller) and Receipts360 (AI expense management, pending). At Yahoo, his team won several U.S. patents for Hadoop integration. His innovations span AI applications, data systems, and he's been a Gartner BI Excellence Award finalist.";
            } else if (lowerQuery.includes('team') || lowerQuery.includes('leadership') || lowerQuery.includes('manage')) {
                return "Ravi has led organizations of 100+ engineers at Cisco, 35+ at Dropbox, 25+ at Chegg. He maintains <5% voluntary turnover and >80% team satisfaction. His leadership style: data-driven decisions, rapid prototyping, building diverse teams, and mentoring talent. Many of his team members have become senior technology leaders.";
            } else if (lowerQuery.includes('contact')) {
                return "To contact Ravi, please use the contact form on this page or connect via LinkedIn at linkedin.com/in/poruriravi. For his full resume, use the 'Request Full Resume' option in the contact form below.";
            } else if (lowerQuery.includes('aws') || lowerQuery.includes('cloud')) {
                return "Ravi is AWS certified with deep cloud expertise. At Cisco, built CX Cloud platform on AWS achieving $250M+ ARR. At Dropbox, implemented analytics on AWS/Snowflake. His current AI products use AWS Lambda, ECS, S3, RDS, API Gateway. Also experienced with Google Cloud and Azure. Achieved 40% cost reduction through cloud optimization.";
            } else if (lowerQuery.includes('data') || lowerQuery.includes('big data')) {
                return "Ravi led data platforms processing petabytes for 600M+ users. At Dropbox: Global Head of Data & BI, built Snowflake analytics. At Yahoo: managed 400B+ events, pioneered Hadoop/Spark adoption. Expert in Spark, Kafka, Airflow, Snowflake, Databricks. Led Dropbox from pre-IPO to IPO ensuring data accuracy.";
            } else {
                return "I can provide detailed information about Ravi's AI products, 20+ years of experience, technical expertise, patents, and leadership roles. What<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ravi Poruri - Technology Leader & AI Innovator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 60px 40px;
            margin-bottom: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 30px;
        }

        .intro {
            font-size: 1.1em;
            color: #555;
            max-width: 800px;
            margin: 0 auto 40px;
            line-height: 1.8;
        }

        .highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .highlight-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .highlight-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2em;
            position: relative;
            padding-bottom: 15px;
        }

        .section h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .experience-item {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #eee;
        }

        .experience-item:last-child {
            border-bottom: none;
        }

        .company {
            font-weight: bold;
            color: #333;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .role {
            color: #667eea;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .period {
            color: #999;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .description {
            color: #666;
            line-height: 1.6;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #764ba2;
        }

        .achievement-card h3 {
            color: #764ba2;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .achievement-card p {
            color: #666;
            line-height: 1.6;
        }

        .cta-section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .cta-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .cta-section p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        /* Chat Widget Styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .chat-button:hover {
            transform: scale(1.1);
        }

        .chat-button svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        .chat-box {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 40px rgba(0,0,0,0.2);
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 1.2em;
        }

        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .user-message, .ai-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 10px;
            word-wrap: break-word;
        }

        .user-message {
            align-self: flex-end;
            background: #667eea;
            color: white;
        }

        .ai-message {
            align-self: flex-start;
            background: #f1f3f5;
            color: #333;
        }

        .chat-input-container {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        .chat-input-container input {
            flex: 1;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
        }

        .chat-input-container button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            padding: 10px 15px;
            background: #f1f3f5;
            border-radius: 10px;
        }

        .typing-indicator.show {
            display: flex;
            gap: 4px;
        }

        .typing-indicator span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .section {
                padding: 30px 20px;
            }
            
            .chat-box {
                width: 90vw;
                right: -10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ravi Poruri</h1>
            <p class="tagline">Technology Leader & AI Innovator</p>
            <p class="intro">
                Building next-generation AI products while leveraging decades of experience in digital transformation and enterprise architecture.
            </p>
            <div class="highlights">
                <div class="highlight-card">
                    <h3>🚀 Current Focus</h3>
                    <p>Founder at Equiti Ventures, developing AI-powered applications</p>
                </div>
                <div class="highlight-card">
                    <h3>💡 Innovation</h3>
                    <p>Multiple patents filed in AI applications and data systems</p>
                </div>
                <div class="highlight-card">
                    <h3>🌍 Social Impact</h3>
                    <p>RippleWorks Expert Advisor supporting social ventures globally</p>
                </div>
                <div class="highlight-card">
                    <h3>📊 Scale</h3>
                    <p>Led teams of 100+ engineers, managed multi-million dollar products</p>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="section">
                <h2>Professional Experience</h2>
                <div class="experience-item">
                    <div class="company">Equiti Ventures</div>
                    <div class="role">Founder & AI Product Leader</div>
                    <div class="period">2024 - Present</div>
                    <div class="description">
                        Developing innovative AI-powered applications leveraging latest advances in LLMs, computer vision, and machine learning technologies.
                    </div>
                </div>
                <div class="experience-item">
                    <div class="company">Cisco Systems</div>
                    <div class="role">Senior Director</div>
                    <div class="period">2020 - 2024</div>
                    <div class="description">
                        Led cloud platform transformation serving thousands of enterprise customers, driving significant revenue growth.
                    </div>
                </div>
                <div class="experience-item">
                    <div class="company">Dropbox</div>
                    <div class="role">Global Head of Data & BI</div>
                    <div class="period">2017 - 2020</div>
                    <div class="description">
                        Architected data strategy for successful IPO, implementing enterprise analytics and ensuring compliance.
                    </div>
                </div>
                <div class="experience-item">
                    <div class="company">Chegg</div>
                    <div class="role">Director of Data Engineering</div>
                    <div class="period">2015 - 2017</div>
                    <div class="description">
                        Built data platforms processing billions of events, enabling real-time analytics at scale.
                    </div>
                </div>
                <div class="experience-item">
                    <div class="company">Yahoo</div>
                    <div class="role">Senior Manager</div>
                    <div class="period">2007 - 2015</div>
                    <div class="description">
                        Led multiple teams in building platforms serving hundreds of millions of users globally.
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Key Achievements</h2>
                <div class="achievements-grid">
                    <div class="achievement-card">
                        <h3>🏗️ Platform Scale</h3>
                        <p>Built and scaled platforms serving hundreds of millions of users, processing petabytes of data with high availability.</p>
                    </div>
                    <div class="achievement-card">
                        <h3>📈 Business Impact</h3>
                        <p>Led data strategy for successful IPO, drove multi-million dollar revenue growth through technology innovation.</p>
                    </div>
                    <div class="achievement-card">
                        <h3>🤖 AI Innovation</h3>
                        <p>Filed multiple patents in AI applications, pioneering use of LLMs and computer vision in enterprise products.</p>
                    </div>
                    <div class="achievement-card">
                        <h3>👥 Team Leadership</h3>
                        <p>Built and led global engineering teams with exceptional retention rates and engagement scores.</p>
                    </div>
                    <div class="achievement-card">
                        <h3>🔄 Digital Transformation</h3>
                        <p>Successfully led enterprise-wide digital transformations, modernizing technology stacks and processes.</p>
                    </div>
                    <div class="achievement-card">
                        <h3>🎯 Technical Excellence</h3>
                        <p>Expert in AI/ML, cloud architecture, data platforms, and modern engineering practices.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="cta-section" id="contact">
            <h2>Let's Connect</h2>
            <p>Interested in discussing AI innovation, technology leadership, or potential collaborations?</p>
            <div style="text-align: center; margin: 30px 0;">
                <a href="https://linkedin.com/in/poruriravi" target="_blank" style="display: inline-block; margin: 10px; padding: 12px 30px; background: #0077B5; color: white; text-decoration: none; border-radius: 30px; font-size: 1.1em; font-weight: 500; box-shadow: 0 4px 15px rgba(0,119,181,0.3); transition: transform 0.3s;">
                    Connect on LinkedIn
                </a>
            </div>
            <form class="contact-form" action="#" method="POST">
                <h3 style="color: #667eea; margin-bottom: 20px;">Request Full Resume or Send Message</h3>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <select id="subject" name="subject" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em;">
                        <option value="resume">Request Full Resume</option>
                        <option value="opportunity">Discuss Opportunity</option>
                        <option value="collaboration">Potential Collaboration</option>
                        <option value="other">Other Inquiry</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Please provide details about your inquiry or why you'd like my full resume..." required></textarea>
                </div>
                <button type="submit" class="submit-btn">Send Request</button>
            </form>
        </div>
    </div>

    <!-- Chat Widget -->
    <div id="chatWidget" class="chat-widget">
        <button onclick="toggleChat()" class="chat-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                <path d="M12 2C6.48 2 2 6.48 2 12c0 1.54.36 3 .97 4.29L1 23l6.71-1.97C9 21.64 10.46 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2z"/>
            </svg>
        </button>
        <div id="chatBox" class="chat-box">
            <div class="chat-header">
                <h3>AI Assistant</h3>
                <button onclick="toggleChat()" class="close-button">×</button>
            </div>
            <div id="chatMessages" class="chat-messages">
                <div class="ai-message">Hello! I'm Ravi's AI assistant. Ask me about his experience, skills, or achievements.</div>
            </div>
            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Ask about Ravi's experience..." onkeypress="handleChatKeyPress(event)">
                <button onclick="sendChatMessage()">Send</button>
            </div>
        </div>
    </div>

    <script>
        // AI Chatbot with OpenAI API Integration
        const PROFILE_CONTEXT = `
        Ravi Poruri is a technology leader and AI innovator with over 20 years of experience.
        
        Current Role: Founder at Equiti Ventures (2024-Present), developing AI-powered applications
        Also serves as RippleWorks Expert Advisor (2023-Present)
        
        Previous Experience:
        - Senior Director at Cisco Systems (2020-2024)
        - Global Head of Data & BI at Dropbox (2017-2020)
        - Director at Chegg (2015-2017)
        - Senior Manager at Yahoo (2007-2015)
        
        Expertise: AI/ML, Generative AI, Enterprise Architecture, Data Platforms, Cloud Technologies (AWS), Digital Transformation, Team Leadership
        
        Achievements:
        - Filed multiple patents in AI applications
        - Led teams of 100+ engineers
        - Managed multi-million dollar products and budgets
        - Speaker at industry conferences
        - Built platforms serving hundreds of millions of users
        
        Social Impact: RippleWorks Expert providing strategic guidance to social ventures globally
        
        Location: San Francisco Bay Area
        
        Education: Advanced degrees in Computer Science and Business
        
        IMPORTANT RULES:
        - Never provide personal contact information (email, phone)
        - For contact requests, direct to the contact form or LinkedIn
        - Keep responses professional and focused on public professional information
        - Don't make up information not provided in this context
        `;

        // Your OpenAI API Key with $5 budget limit
        const OPENAI_API_KEY = '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';
        
        async function getAIResponse(userMessage) {
            // Check if API key is placeholder or empty
            if (!OPENAI_API_KEY || OPENAI_API_KEY === 'YOUR_OPENAI_API_KEY_HERE' || OPENAI_API_KEY.length < 20) {
                return generateLocalResponse(userMessage);
            }
            
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${OPENAI_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: `You are an AI assistant for Ravi Poruri's professional portfolio website. Your role is to answer questions ONLY about Ravi's professional background, experience, and expertise based on this information:

${PROFILE_CONTEXT}

Important guidelines:
1. Only answer questions about Ravi's professional profile
2. Be conversational and engaging, not robotic
3. Provide specific details from his background when relevant
4. For contact requests, direct people to use the contact form or LinkedIn
5. Be concise but informative
6. If asked about something not in the context, politely say you can only discuss Ravi's professional background
7. Don't make up information - stick to what's provided`
                            },
                            {
                                role: 'user',
                                content: userMessage
                            }
                        ],
                        max_tokens: 200,
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    console.error('API request failed with status:', response.status);
                    throw new Error('API request failed');
                }

                const data = await response.json();
                if (data.choices && data.choices[0] && data.choices[0].message) {
                    return data.choices[0].message.content;
                } else {
                    console.error('Unexpected API response structure:', data);
                    throw new Error('Invalid API response');
                }
            } catch (error) {
                console.error('OpenAI API error:', error);
                // Fallback to local response if API fails
                return generateLocalResponse(userMessage);
            }
        }

        // Local fallback responses (when API is not available)
        function generateLocalResponse(query) {
            const lowerQuery = query.toLowerCase();
            
            if (lowerQuery.includes('location') || lowerQuery.includes('where') || lowerQuery.includes('based')) {
                return "Ravi is located in Fremont, California, in the San Francisco Bay Area - the heart of technology innovation.";
            } else if (lowerQuery.includes('experience') || lowerQuery.includes('work')) {
                return "Ravi has over 20 years of technology leadership experience. He's currently the Founder of Equiti Ventures, building AI products like Snifty, TurboPassports, Jourro, SniftyShare, and Scan2Secure. Previously, he held senior positions at Cisco (Senior Director), Dropbox (Global Head of Data & BI), Chegg (Director), and Yahoo (Senior Manager).";
            } else if (lowerQuery.includes('current') || lowerQuery.includes('now') || lowerQuery.includes('doing')) {
                return "Ravi is currently the Founder of Equiti Ventures, actively developing multiple AI-powered applications including Snifty (AI marketplace), TurboPassports (document automation), Jourro (content intelligence), SniftyShare (collaborative AI tools), and Scan2Secure (security automation). He also serves as a RippleWorks Expert Advisor.";
            } else if (lowerQuery.includes('skill') || lowerQuery.includes('expertise') || lowerQuery.includes('technical')) {
                return "Ravi's technical expertise includes: AI/ML (LLMs, Computer Vision, NLP), Cloud Platforms (AWS certified, GCP, Azure), Data Technologies (Spark, Kafka, Snowflake), Programming (Python, Java, Scala), and frameworks like TensorFlow, PyTorch, and Langchain. He specializes in building scalable AI solutions and data platforms.";
            } else if (lowerQuery.includes('ai project') || lowerQuery.includes('snifty') || lowerQuery.includes('turbo') || lowerQuery.includes('jourro')) {
                return "Ravi is building several AI products: Snifty (AI-driven marketplace), TurboPassports (automated document processing using computer vision), Jourro (content intelligence with LLMs), SniftyShare (collaborative AI tools), and Scan2Secure (AI-powered security automation). These demonstrate hands-on expertise in practical AI applications.";
            } else if (lowerQuery.includes('cisco') || lowerQuery.includes('dropbox') || lowerQuery.includes('yahoo') || lowerQuery.includes('chegg')) {
                return "At Cisco (2020-2024), Ravi was Senior Director leading cloud platform transformation for enterprise customers. At Dropbox (2017-2020), he was Global Head of Data & BI, architecting data strategy for their IPO. At Chegg (2015-2017), he directed data engineering. At Yahoo (2007-2015), he managed teams building platforms for 600M+ users.";
            } else if (lowerQuery.includes('education') || lowerQuery.includes('degree') || lowerQuery.includes('study')) {
                return "Ravi holds a Master's degree in Computer Science with a focus on AI/ML, and an MBA in Business Administration. He continuously updates his skills with recent certifications in AWS, Google Cloud AI, and advanced machine learning.";
            } else if (lowerQuery.includes('patent') || lowerQuery.includes('innovation')) {
                return "Ravi has filed multiple patents in AI applications and data systems, demonstrating his innovative approach to solving complex technical problems. His current ventures in AI showcase practical implementation of cutting-edge technologies.";
            } else if (lowerQuery.includes('team') || lowerQuery.includes('leadership') || lowerQuery.includes('manage')) {
                return "Ravi has led engineering organizations of 100+ professionals, managed products generating $250M+ in annual revenue, and built high-performing global teams. His leadership style focuses on data-driven decisions, innovation, and developing technical talent.";
            } else if (lowerQuery.includes('contact')) {
                return "To contact Ravi, please use the contact form on this page or connect via LinkedIn. For detailed discussions about opportunities or collaborations, these are the best channels to reach him.";
            } else if (lowerQuery.includes('aws') || lowerQuery.includes('cloud')) {
                return "Ravi is AWS certified and has extensive experience with cloud platforms including AWS, Google Cloud, and Azure. He's architected cloud-native solutions, implemented serverless architectures, and achieved 40% cost reduction through cloud optimization at Cisco.";
            } else if (lowerQuery.includes('data') || lowerQuery.includes('big data')) {
                return "Ravi has deep expertise in data platforms, having built systems processing petabytes of data for 600M+ users. He's worked with technologies like Spark, Kafka, Airflow, Snowflake, and Databricks, and led data strategy for Dropbox's successful IPO.";
            } else {
                return "I can provide information about Ravi's professional experience, technical skills, AI projects, leadership roles, and background. What specific aspect would you like to know more about?";
            }
        }

        function toggleChat() {
            const chatBox = document.getElementById('chatBox');
            if (chatBox.style.display === 'flex') {
                chatBox.style.display = 'none';
            } else {
                chatBox.style.display = 'flex';
                document.getElementById('chatInput').focus();
            }
        }

        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            const chatMessages = document.getElementById('chatMessages');
            
            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = 'user-message';
            userDiv.textContent = message;
            chatMessages.appendChild(userDiv);
            
            // Clear input
            input.value = '';
            
            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator show';
            typingDiv.innerHTML = '<span></span><span></span><span></span>';
            chatMessages.appendChild(typingDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Get AI response
            const response = await getAIResponse(message);
            
            // Remove typing indicator and add response
            typingDiv.remove();
            const aiDiv = document.createElement('div');
            aiDiv.className = 'ai-message';
            aiDiv.textContent = response;
            chatMessages.appendChild(aiDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // Initialize chat state
        document.getElementById('chatBox').style.display = 'none';
    </script>
</body>
</html>
